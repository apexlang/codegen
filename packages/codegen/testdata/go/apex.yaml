spec: ../spec.apexlang
config:
  package: outputtest
  module: github.com/apexlang/outputtest
  aliases:
    UUID:
      type: uuid.UUID
      import: github.com/google/uuid
      parse: uuid.Parse
      format: String
  logger:
    import: github.com/go-logr/logr
    interface: logr.Logger
generates:
  openapi.yaml:
    module: "../../../openapiv3"
    visitorClass: OpenAPIV3Visitor
  proto/service.proto:
    module: "../../../proto"
    visitorClass: ProtoVisitor
    config:
      options:
        go_package: github.com/apexlang/outputtest/proto
    runAfter:
      - command: |
          protoc
          --go_out=.
          --go_opt=paths=source_relative
          --go-grpc_out=.
          --go-grpc_opt=paths=source_relative
          proto/service.proto
  pkg/outputtest/interfaces.go:
    module: "../../../go"
    visitorClass: InterfacesVisitor
  pkg/outputtest/msgpack.go:
    module: "../../../go"
    visitorClass: MsgPackVisitor
  pkg/outputtest/fiber.go:
    module: "../../../go"
    visitorClass: FiberVisitor
  pkg/outputtest/grpc.go:
    module: "../../../go"
    visitorClass: GRPCVisitor
    config:
      protoPackage: github.com/apexlang/outputtest/proto
  pkg/outputtest/services.go:
    #ifNotExists: true
    module: "../../../go"
    visitorClass: ScaffoldVisitor
    config:
      types:
        - service
  pkg/outputtest/repositories.go:
    #ifNotExists: true
    module: "../../../go"
    visitorClass: ScaffoldVisitor
    config:
      names:
        - Repository
  cmd/main.go:
    #ifNotExists: false  # Change to true to control dependency injection
    module: "../../../go"
    visitorClass: MainVisitor
